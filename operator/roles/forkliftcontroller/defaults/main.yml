---
app_name: "{{ lookup('env', 'APP_NAME') or 'forklift' }}"
app_namespace: "{{ lookup( 'env', 'WATCH_NAMESPACE') or 'konveyor-forklift' }}"

# Feature defaults
feature_ui_plugin: true
feature_validation: true
feature_must_gather_api: true
feature_volume_populator: true

k8s_cluster: false
feature_auth_required: true
image_pull_policy: Always
forklift_operator_version: "latest"
forklift_resources:
  - Deployment
  - ConfigMap
  - Service
  - Route

controller_image_fqin: "{{ lookup( 'env', 'CONTROLLER_IMAGE') or lookup( 'env', 'RELATED_IMAGE_CONTROLLER') }}"
controller_configmap_name: "{{ controller_service_name }}-config"
controller_service_name: "{{ app_name }}-controller"
controller_deployment_name: "{{ controller_service_name }}"
controller_container_name: "{{ app_name }}-controller"
controller_container_limits_cpu: "500m"
controller_container_limits_memory: "800Mi"
controller_container_requests_cpu: "100m"
controller_container_requests_memory: "350Mi"
controller_log_level: 3
controller_precopy_interval: 60
controller_snapshot_removal_timeout_minuts: 120
controller_snapshot_status_check_rate_seconds: 10
controller_vsphere_incremental_backup: true
controller_ovirt_warm_migration: true
controller_max_vm_inflight: 20
profiler_volume_path: "/var/cache/profiler"

inventory_volume_path: "/var/cache/inventory"
inventory_container_name: "{{ app_name }}-inventory"
inventory_service_name: "{{ app_name }}-inventory"
inventory_route_name: "{{ inventory_service_name }}"
inventory_container_limits_cpu: "1000m"
inventory_container_limits_memory: "1Gi"
inventory_container_requests_cpu: "500m"
inventory_container_requests_memory: "500Mi"
inventory_tls_secret_name: "{{ inventory_service_name }}-serving-cert"
inventory_issuer_name: "{{ inventory_service_name }}-issuer"
inventory_certificate_name: "{{ inventory_service_name }}-certificate"

validation_image_fqin: "{{ lookup( 'env', 'VALIDATION_IMAGE') or lookup( 'env', 'RELATED_IMAGE_VALIDATION') }}"
validation_configmap_name: "{{ validation_service_name }}-config"
validation_service_name: "{{ app_name }}-validation"
validation_deployment_name: "{{ validation_service_name }}"
validation_container_name: "{{ app_name }}-validation"
validation_extra_volume_name: "validation-extra-rules"
validation_extra_volume_mountpath: "/usr/share/opa/policies/extra"
validation_policy_agent_search_interval: "120"
validation_container_limits_cpu: "1000m"
validation_container_limits_memory: "300Mi"
validation_container_requests_cpu: "400m"
validation_container_requests_memory: "50Mi"
validation_tls_secret_name: "{{ validation_service_name }}-serving-cert"
validation_issuer_name: "{{ validation_service_name }}-issuer"
validation_certificate_name: "{{ validation_service_name }}-certificate"
validation_state: absent

ui_plugin_image_fqin: "{{ lookup( 'env', 'UI_PLUGIN_IMAGE') or lookup( 'env', 'RELATED_IMAGE_UI_PLUGIN') }}"
ui_plugin_console_name: "{{ app_name }}-console-plugin"
ui_plugin_display_name: "Console plugin for {{ app_name }}"
ui_plugin_service_name: "{{ app_name }}-ui-plugin"
ui_plugin_deployment_name: "{{ ui_plugin_service_name }}"
ui_plugin_container_name: "{{ app_name }}-ui-plugin"
ui_plugin_container_limits_cpu: "100m"
ui_plugin_container_limits_memory: "800Mi"
ui_plugin_container_requests_cpu: "100m"
ui_plugin_container_requests_memory: "150Mi"
ui_plugin_state: absent

api_image_fqin: "{{ lookup( 'env', 'API_IMAGE') or lookup( 'env', 'RELATED_IMAGE_API') }}"
api_service_name: "{{ app_name }}-api"
api_deployment_name: "{{ api_service_name }}"
api_container_name: "{{ app_name }}-api"
api_container_limits_cpu: "1000m"
api_container_limits_memory: "1Gi"
api_container_requests_cpu: "100m"
api_container_requests_memory: "150Mi"
api_tls_secret_name: "{{ api_service_name }}-serving-cert"
api_issuer_name: "{{ api_service_name }}-issuer"
api_certificate_name: "{{ api_service_name }}-certificate"

populator_controller_image_fqin: "{{ lookup( 'env', 'POPULATOR_CONTROLLER_IMAGE') or lookup( 'env', 'RELATED_IMAGE_POPULATOR_CONTROLLER') }}"
populator_ovirt_image_fqin: "{{ lookup( 'env', 'OVIRT_POPULATOR_IMAGE') or lookup( 'env', 'RELATED_IMAGE_RHV_POPULATOR') }}"
populator_controller_deployment_name: "{{ app_name }}-volume-populator-controller"
populator_controller_container_name: "{{ app_name }}-populator-controller"
populator_openstack_image_fqin: "{{ lookup( 'env', 'OPENSTACK_POPULATOR_IMAGE') or lookup( 'env', 'RELATED_IMAGE_OPENSTACK_POPULATOR') }}"

must_gather_api_image_fqin: "{{ lookup( 'env', 'MUST_GATHER_API_IMAGE') or lookup( 'env', 'RELATED_IMAGE_MUST_GATHER_API') }}"
must_gather_api_service_name: "{{ app_name }}-must-gather-api"
must_gather_api_deployment_name: "{{ must_gather_api_service_name }}"
must_gather_api_container_name: "{{ app_name }}-must-gather-api"
must_gather_api_container_limits_cpu: "1000m"
must_gather_api_container_limits_memory: "1Gi"
must_gather_api_container_requests_cpu: "100m"
must_gather_api_container_requests_memory: "150Mi"
must_gather_api_tls_secret_name: "{{ must_gather_api_service_name }}-serving-cert"
must_gather_api_issuer_name: "{{ must_gather_api_service_name  }}-issuer"
must_gather_api_certificate_name: "{{ must_gather_api_service_name }}-certificate"
must_gather_api_db_path: "/tmp/gatherings.db"
must_gather_api_cleanup_max_age: "-1"
must_gather_api_debug: false
must_gather_api_state: absent

must_gather_image_fqin: "{{ lookup( 'env', 'MUST_GATHER_IMAGE') or lookup( 'env', 'RELATED_IMAGE_MUST_GATHER') }}"
virt_v2v_image_fqin: "{{ lookup( 'env', 'VIRT_V2V_IMAGE') or lookup( 'env', 'RELATED_IMAGE_VIRT_V2V') }}"
virt_v2v_warm_image_fqin: "{{ lookup( 'env', 'VIRT_V2V_WARM_IMAGE') or lookup( 'env', 'RELATED_IMAGE_VIRT_V2V_WARM') }}"
virt_v2v_dont_request_kvm: "{{ lookup( 'env', 'VIRT_V2V_DONT_REQUEST_KVM') }}"

ova_provider_server_fqin: "{{ lookup( 'env', 'OVA_PROVIDER_SERVER_IMAGE') or lookup( 'env', 'RELATED_IMAGE_OVA_PROVIDER_SERVER') }}"