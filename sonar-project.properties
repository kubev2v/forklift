# ================================================================
# SonarQube Configuration for Go Projects
# Auto-generated template for Spadex CI/CD workflows
# ================================================================
# Generated for: mogoco
# Project Key: mogoco
# Language: Go
# ================================================================

# ================================================================
# Project Identification
# ================================================================
sonar.projectKey=mogoco
sonar.projectName=mogoco
# Version is set via -Dsonar.projectVersion in CI/CD (defaults to 1.0 if not set)
sonar.projectVersion=1.0

# ================================================================
# Source Configuration
# ================================================================
sonar.sources=.
# Identify test file patterns (excluded from analysis via sonar.exclusions below)
sonar.test.inclusions=**/*_test.go,**/test/**,**/tests/**
sonar.sourceEncoding=UTF-8

# ================================================================
# EXCLUSIONS - Critical for Accurate Coverage
# ================================================================
# IMPORTANT: All exclusions must be in ONE assignment (don't repeat sonar.exclusions=)
# SonarQube only reads the LAST sonar.exclusions= if there are multiple assignments
sonar.exclusions=\
  **/*_test.go,\
  **/test/**,\
  **/tests/**,\
  **/testdata/**,\
  **/*_mock.go,\
  **/mock_*.go,\
  **/*.pb.go,\
  **/*.pb.gw.go,\
  **/generated/**,\
  **/gen/**,\
  **/*_generated.go,\
  **/wire_gen.go,\
  **/zz_generated.*.go,\
  **/vendor/**,\
  **/third_party/**,\
  **/_build/**,\
  **/build/**,\
  **/dist/**,\
  **/.build/**,\
  **/.github/**,\
  **/scripts/**,\
  **/*.pkg,\
  **/*.exe,\
  **/*.dll,\
  **/*.so,\
  **/*.dylib,\
  **/*.zip,\
  **/*.tar.gz,\
  **/*.jar

# ================================================================
# COVERAGE CONFIGURATION
# ================================================================
# Coverage Report Paths
# Spadex workflows check for coverage in these locations (in order):
#   1. ./_build/cov/*.out (preferred - most organized)
#   2. ./coverage/*.out
#   3. ./*.out (root directory)
# Match your Makefile's COVER_DIR setting
sonar.go.coverage.reportPaths=_build/cov/coverage.out,./coverage/*.out,./*.out

# Test Report Paths (test execution details)
sonar.go.tests.reportPaths=_build/cov/test-report.json

# Linting Report Paths
# Spadex lint job generates this file
sonar.go.golangci-lint.reportPaths=lint-report.xml

# ================================================================
# QUALITY GATE SETTINGS
# ================================================================
# Wait for quality gate result (required by Spadex workflows)
sonar.qualitygate.wait=true
sonar.qualitygate.timeout=600
# Quality gate enforcement controlled by workflow input:
# quality-gate-check: true/false in your workflow call

# ================================================================
# CODE DUPLICATION SETTINGS
# ================================================================
# Exclude test files from duplication detection
sonar.cpd.exclusions=\
  **/*_test.go,\
  **/mock_*.go

# ================================================================
# ISSUE IGNORE SETTINGS
# ================================================================
# Ignore Go test files from code quality issues
sonar.issue.ignore.multicriteria=e1
sonar.issue.ignore.multicriteria.e1.ruleKey=*
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*_test.go

# ================================================================
# SCM CONFIGURATION
# ================================================================
sonar.scm.provider=git
sonar.scm.disabled=false
